{"ast":null,"code":"var _jsxFileName = \"/Users/ksk432/discussion/frontend/src/pages/Presenter.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { socket } from '../utils/socket';\nimport CountdownTimer from '../components/CountdownTimer';\nimport VoteBar from '../components/VoteBar';\nimport StampAnimation from '../components/StampAnimation';\nimport beepSound from '../assets/beep.mp3';\nimport extendSound from '../assets/extend.mp3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Presenter() {\n  _s();\n  const [question, setQuestion] = useState(null);\n  const [time, setTime] = useState(0);\n  const [votes, setVotes] = useState(0);\n  const [connections, setConnections] = useState(0);\n  const [stampCounts, setStampCounts] = useState({\n    like: 0,\n    wow: 0,\n    agree: 0,\n    question: 0\n  });\n  const [speaker, setSpeaker] = useState(null);\n  const [floatingStamp, setFloatingStamp] = useState(null);\n  const beepAudioRef = useRef(null);\n  const extendAudioRef = useRef(null);\n  useEffect(() => {\n    socket.on('init', data => {\n      setQuestion(data.question);\n      setTime(data.time);\n      setVotes(data.votes);\n      setStampCounts(data.stampCounts);\n      setSpeaker(data.speaker);\n    });\n    socket.on('questionUpdate', q => setQuestion(q));\n    socket.on('timeUpdate', t => setTime(t));\n    socket.on('voteUpdate', ({\n      votes\n    }) => setVotes(votes));\n    socket.on('connectionsUpdate', c => setConnections(c));\n    socket.on('stampUpdate', ({\n      stampCounts\n    }) => setStampCounts(stampCounts));\n    socket.on('stampAnimation', ({\n      type,\n      icon\n    }) => {\n      setFloatingStamp(icon);\n      setTimeout(() => setFloatingStamp(null), 1500);\n    });\n    socket.on('lastThreeSeconds', () => {\n      if (beepAudioRef.current) beepAudioRef.current.play();\n    });\n    socket.on('timeExtended', sec => {\n      if (extendAudioRef.current) extendAudioRef.current.play();\n    });\n    return () => {\n      socket.off('init');\n      socket.off('questionUpdate');\n      socket.off('timeUpdate');\n      socket.off('voteUpdate');\n      socket.off('connectionsUpdate');\n      socket.off('stampUpdate');\n      socket.off('stampAnimation');\n      socket.off('lastThreeSeconds');\n      socket.off('timeExtended');\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: beepAudioRef,\n      src: beepSound\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: extendAudioRef,\n      src: extendSound\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold text-primary mb-4\",\n      children: \"\\u30D7\\u30EC\\u30BC\\u30F3\\u30C6\\u30FC\\u30B7\\u30E7\\u30F3\\u753B\\u9762\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xl mb-2\",\n        children: speaker ? `${speaker.name} - ${speaker.topic}` : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-2xl mb-4\",\n        children: question ? question.text : \"質問待ち...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CountdownTimer, {\n        time: time\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-4\",\n        children: /*#__PURE__*/_jsxDEV(VoteBar, {\n          votes: votes,\n          total: connections\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-4 text-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\uD83D\\uDC4D \", stampCounts.like]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\uD83D\\uDE32 \", stampCounts.wow]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\uD83D\\uDDF3\\uFE0F \", stampCounts.agree]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"\\u2753 \", stampCounts.question]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-500\",\n        children: [\"\\u53C2\\u52A0\\u8005\\u6570: \", connections]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), floatingStamp && /*#__PURE__*/_jsxDEV(StampAnimation, {\n      icon: floatingStamp\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(Presenter, \"QxrwEOy+LeJ5MolHVdHd33VBwx4=\");\n_c = Presenter;\nvar _c;\n$RefreshReg$(_c, \"Presenter\");","map":{"version":3,"names":["React","useEffect","useState","useRef","socket","CountdownTimer","VoteBar","StampAnimation","beepSound","extendSound","jsxDEV","_jsxDEV","Presenter","_s","question","setQuestion","time","setTime","votes","setVotes","connections","setConnections","stampCounts","setStampCounts","like","wow","agree","speaker","setSpeaker","floatingStamp","setFloatingStamp","beepAudioRef","extendAudioRef","on","data","q","t","c","type","icon","setTimeout","current","play","sec","off","className","children","ref","src","fileName","_jsxFileName","lineNumber","columnNumber","name","topic","text","total","_c","$RefreshReg$"],"sources":["/Users/ksk432/discussion/frontend/src/pages/Presenter.js"],"sourcesContent":["import React, {useEffect, useState, useRef} from 'react';\nimport {socket} from '../utils/socket';\nimport CountdownTimer from '../components/CountdownTimer';\nimport VoteBar from '../components/VoteBar';\nimport StampAnimation from '../components/StampAnimation';\n\nimport beepSound from '../assets/beep.mp3';\nimport extendSound from '../assets/extend.mp3';\n\nexport default function Presenter(){\n  const [question,setQuestion]=useState(null);\n  const [time,setTime]=useState(0);\n  const [votes,setVotes]=useState(0);\n  const [connections,setConnections]=useState(0);\n  const [stampCounts,setStampCounts]=useState({like:0,wow:0,agree:0,question:0});\n  const [speaker,setSpeaker]=useState(null);\n  const [floatingStamp,setFloatingStamp]=useState(null);\n\n  const beepAudioRef = useRef(null);\n  const extendAudioRef = useRef(null);\n\n  useEffect(()=>{\n    socket.on('init',(data)=>{\n      setQuestion(data.question);\n      setTime(data.time);\n      setVotes(data.votes);\n      setStampCounts(data.stampCounts);\n      setSpeaker(data.speaker);\n    });\n    socket.on('questionUpdate',(q)=>setQuestion(q));\n    socket.on('timeUpdate',(t)=>setTime(t));\n    socket.on('voteUpdate',({votes})=>setVotes(votes));\n    socket.on('connectionsUpdate',(c)=>setConnections(c));\n    socket.on('stampUpdate',({stampCounts})=>setStampCounts(stampCounts));\n    socket.on('stampAnimation',({type,icon})=>{\n      setFloatingStamp(icon);\n      setTimeout(()=>setFloatingStamp(null),1500);\n    });\n    socket.on('lastThreeSeconds',()=>{\n      if(beepAudioRef.current) beepAudioRef.current.play();\n    });\n    socket.on('timeExtended',(sec)=>{\n      if(extendAudioRef.current) extendAudioRef.current.play();\n    });\n\n    return ()=>{\n      socket.off('init');\n      socket.off('questionUpdate');\n      socket.off('timeUpdate');\n      socket.off('voteUpdate');\n      socket.off('connectionsUpdate');\n      socket.off('stampUpdate');\n      socket.off('stampAnimation');\n      socket.off('lastThreeSeconds');\n      socket.off('timeExtended');\n    };\n  },[]);\n\n  return (\n    <div className=\"p-4\">\n      <audio ref={beepAudioRef} src={beepSound}/>\n      <audio ref={extendAudioRef} src={extendSound}/>\n      <h1 className=\"text-3xl font-bold text-primary mb-4\">プレゼンテーション画面</h1>\n      <div className=\"flex flex-col items-center\">\n        <div className=\"text-xl mb-2\">{speaker ? `${speaker.name} - ${speaker.topic}` : ''}</div>\n        <div className=\"text-2xl mb-4\">{question? question.text : \"質問待ち...\"}</div>\n        <CountdownTimer time={time} />\n        <div className=\"my-4\">\n          <VoteBar votes={votes} total={connections}/>\n        </div>\n        <div className=\"my-4 text-lg\">\n          <div className=\"flex space-x-4\">\n            <div>👍 {stampCounts.like}</div>\n            <div>😲 {stampCounts.wow}</div>\n            <div>🗳️ {stampCounts.agree}</div>\n            <div>❓ {stampCounts.question}</div>\n          </div>\n        </div>\n        <div className=\"text-sm text-gray-500\">参加者数: {connections}</div>\n      </div>\n      {floatingStamp && <StampAnimation icon={floatingStamp}/>}\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAO,OAAO;AACxD,SAAQC,MAAM,QAAO,iBAAiB;AACtC,OAAOC,cAAc,MAAM,8BAA8B;AACzD,OAAOC,OAAO,MAAM,uBAAuB;AAC3C,OAAOC,cAAc,MAAM,8BAA8B;AAEzD,OAAOC,SAAS,MAAM,oBAAoB;AAC1C,OAAOC,WAAW,MAAM,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,eAAe,SAASC,SAASA,CAAA,EAAE;EAAAC,EAAA;EACjC,MAAM,CAACC,QAAQ,EAACC,WAAW,CAAC,GAACb,QAAQ,CAAC,IAAI,CAAC;EAC3C,MAAM,CAACc,IAAI,EAACC,OAAO,CAAC,GAACf,QAAQ,CAAC,CAAC,CAAC;EAChC,MAAM,CAACgB,KAAK,EAACC,QAAQ,CAAC,GAACjB,QAAQ,CAAC,CAAC,CAAC;EAClC,MAAM,CAACkB,WAAW,EAACC,cAAc,CAAC,GAACnB,QAAQ,CAAC,CAAC,CAAC;EAC9C,MAAM,CAACoB,WAAW,EAACC,cAAc,CAAC,GAACrB,QAAQ,CAAC;IAACsB,IAAI,EAAC,CAAC;IAACC,GAAG,EAAC,CAAC;IAACC,KAAK,EAAC,CAAC;IAACZ,QAAQ,EAAC;EAAC,CAAC,CAAC;EAC9E,MAAM,CAACa,OAAO,EAACC,UAAU,CAAC,GAAC1B,QAAQ,CAAC,IAAI,CAAC;EACzC,MAAM,CAAC2B,aAAa,EAACC,gBAAgB,CAAC,GAAC5B,QAAQ,CAAC,IAAI,CAAC;EAErD,MAAM6B,YAAY,GAAG5B,MAAM,CAAC,IAAI,CAAC;EACjC,MAAM6B,cAAc,GAAG7B,MAAM,CAAC,IAAI,CAAC;EAEnCF,SAAS,CAAC,MAAI;IACZG,MAAM,CAAC6B,EAAE,CAAC,MAAM,EAAEC,IAAI,IAAG;MACvBnB,WAAW,CAACmB,IAAI,CAACpB,QAAQ,CAAC;MAC1BG,OAAO,CAACiB,IAAI,CAAClB,IAAI,CAAC;MAClBG,QAAQ,CAACe,IAAI,CAAChB,KAAK,CAAC;MACpBK,cAAc,CAACW,IAAI,CAACZ,WAAW,CAAC;MAChCM,UAAU,CAACM,IAAI,CAACP,OAAO,CAAC;IAC1B,CAAC,CAAC;IACFvB,MAAM,CAAC6B,EAAE,CAAC,gBAAgB,EAAEE,CAAC,IAAGpB,WAAW,CAACoB,CAAC,CAAC,CAAC;IAC/C/B,MAAM,CAAC6B,EAAE,CAAC,YAAY,EAAEG,CAAC,IAAGnB,OAAO,CAACmB,CAAC,CAAC,CAAC;IACvChC,MAAM,CAAC6B,EAAE,CAAC,YAAY,EAAC,CAAC;MAACf;IAAK,CAAC,KAAGC,QAAQ,CAACD,KAAK,CAAC,CAAC;IAClDd,MAAM,CAAC6B,EAAE,CAAC,mBAAmB,EAAEI,CAAC,IAAGhB,cAAc,CAACgB,CAAC,CAAC,CAAC;IACrDjC,MAAM,CAAC6B,EAAE,CAAC,aAAa,EAAC,CAAC;MAACX;IAAW,CAAC,KAAGC,cAAc,CAACD,WAAW,CAAC,CAAC;IACrElB,MAAM,CAAC6B,EAAE,CAAC,gBAAgB,EAAC,CAAC;MAACK,IAAI;MAACC;IAAI,CAAC,KAAG;MACxCT,gBAAgB,CAACS,IAAI,CAAC;MACtBC,UAAU,CAAC,MAAIV,gBAAgB,CAAC,IAAI,CAAC,EAAC,IAAI,CAAC;IAC7C,CAAC,CAAC;IACF1B,MAAM,CAAC6B,EAAE,CAAC,kBAAkB,EAAC,MAAI;MAC/B,IAAGF,YAAY,CAACU,OAAO,EAAEV,YAAY,CAACU,OAAO,CAACC,IAAI,CAAC,CAAC;IACtD,CAAC,CAAC;IACFtC,MAAM,CAAC6B,EAAE,CAAC,cAAc,EAAEU,GAAG,IAAG;MAC9B,IAAGX,cAAc,CAACS,OAAO,EAAET,cAAc,CAACS,OAAO,CAACC,IAAI,CAAC,CAAC;IAC1D,CAAC,CAAC;IAEF,OAAO,MAAI;MACTtC,MAAM,CAACwC,GAAG,CAAC,MAAM,CAAC;MAClBxC,MAAM,CAACwC,GAAG,CAAC,gBAAgB,CAAC;MAC5BxC,MAAM,CAACwC,GAAG,CAAC,YAAY,CAAC;MACxBxC,MAAM,CAACwC,GAAG,CAAC,YAAY,CAAC;MACxBxC,MAAM,CAACwC,GAAG,CAAC,mBAAmB,CAAC;MAC/BxC,MAAM,CAACwC,GAAG,CAAC,aAAa,CAAC;MACzBxC,MAAM,CAACwC,GAAG,CAAC,gBAAgB,CAAC;MAC5BxC,MAAM,CAACwC,GAAG,CAAC,kBAAkB,CAAC;MAC9BxC,MAAM,CAACwC,GAAG,CAAC,cAAc,CAAC;IAC5B,CAAC;EACH,CAAC,EAAC,EAAE,CAAC;EAEL,oBACEjC,OAAA;IAAKkC,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClBnC,OAAA;MAAOoC,GAAG,EAAEhB,YAAa;MAACiB,GAAG,EAAExC;IAAU;MAAAyC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eAC3CzC,OAAA;MAAOoC,GAAG,EAAEf,cAAe;MAACgB,GAAG,EAAEvC;IAAY;MAAAwC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eAC/CzC,OAAA;MAAIkC,SAAS,EAAC,sCAAsC;MAAAC,QAAA,EAAC;IAAW;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACrEzC,OAAA;MAAKkC,SAAS,EAAC,4BAA4B;MAAAC,QAAA,gBACzCnC,OAAA;QAAKkC,SAAS,EAAC,cAAc;QAAAC,QAAA,EAAEnB,OAAO,GAAG,GAAGA,OAAO,CAAC0B,IAAI,MAAM1B,OAAO,CAAC2B,KAAK,EAAE,GAAG;MAAE;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACzFzC,OAAA;QAAKkC,SAAS,EAAC,eAAe;QAAAC,QAAA,EAAEhC,QAAQ,GAAEA,QAAQ,CAACyC,IAAI,GAAG;MAAS;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAC1EzC,OAAA,CAACN,cAAc;QAACW,IAAI,EAAEA;MAAK;QAAAiC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC9BzC,OAAA;QAAKkC,SAAS,EAAC,MAAM;QAAAC,QAAA,eACnBnC,OAAA,CAACL,OAAO;UAACY,KAAK,EAAEA,KAAM;UAACsC,KAAK,EAAEpC;QAAY;UAAA6B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzC,CAAC,eACNzC,OAAA;QAAKkC,SAAS,EAAC,cAAc;QAAAC,QAAA,eAC3BnC,OAAA;UAAKkC,SAAS,EAAC,gBAAgB;UAAAC,QAAA,gBAC7BnC,OAAA;YAAAmC,QAAA,GAAK,eAAG,EAACxB,WAAW,CAACE,IAAI;UAAA;YAAAyB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAChCzC,OAAA;YAAAmC,QAAA,GAAK,eAAG,EAACxB,WAAW,CAACG,GAAG;UAAA;YAAAwB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC/BzC,OAAA;YAAAmC,QAAA,GAAK,qBAAI,EAACxB,WAAW,CAACI,KAAK;UAAA;YAAAuB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAClCzC,OAAA;YAAAmC,QAAA,GAAK,SAAE,EAACxB,WAAW,CAACR,QAAQ;UAAA;YAAAmC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACNzC,OAAA;QAAKkC,SAAS,EAAC,uBAAuB;QAAAC,QAAA,GAAC,4BAAM,EAAC1B,WAAW;MAAA;QAAA6B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7D,CAAC,EACLvB,aAAa,iBAAIlB,OAAA,CAACJ,cAAc;MAACgC,IAAI,EAAEV;IAAc;MAAAoB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACrD,CAAC;AAEV;AAACvC,EAAA,CA1EuBD,SAAS;AAAA6C,EAAA,GAAT7C,SAAS;AAAA,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}